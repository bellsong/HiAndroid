# 蓝牙耳机规格（HFP、HSP、A2DP、AVRCP）简介

当两台蓝牙设备建立连接时，它们会获取对应设备提供的协议。 只有使用相同协议的设备才能交换数据，就像两个人要使用相同的语言才能进行有意义的对话一样。当蓝牙定义设备之间的物理无线连接时，蓝牙规格会建立这些设备能够使用蓝牙技术交换的命令和功能。HSP和HFP蓝牙规格是典型单声道蓝牙耳机操作所需的规格，A2DP和AVRCP对于立体声耳机很重要。
    
## HSP（手机规格，Head-Set-Profile）
这是最常用的配置，为当前流行支持蓝牙耳机与移动电话使用，提供手机与耳机之间通信所需的基本功能。 连接和配置好后，耳机可以作为远程设备的音频输入和输出接口。
    
## HFP（免提规格，Hands-Free-Profile）
在HSP的基础上增加了某些扩展功能，常用来让车载免提装置来控制移动电话。它使用连续可变斜率增量调制或脉冲编码对数一法或μ-法量化音频通道调制。 描述了网关设备如何用于供免提设备拨打和接听呼叫。典型配置如汽车使用手机作为网关设备。在车内，立体声系统用于电话音频，而车内安装的麦克风则用于通话时发送输出音频。HFP 还可用于个人计算机在家中或办公环境中作为手机扬声器的情况。
    
## A2DP（高级音频传送规格， Advanced Audio Distribution Profile）
允许传输立体声音频信号（相比用于HSP和HFP的单声道加密，质量要好得多）。A2DP能够让两个同样支持蓝牙音效传输的装置互相连接，都能输出如CD音质(16 bits，44.1 kHz)般的音乐。假如有一方没有支持A2DP的话，这时音效就只能输出Handsfree Profile(8 bits，8 kHz)，就算耳机是采用双耳筒的设计，也只能有一般电话的单声道音质，与真正的立体声相去甚远。
    
## AVRCP（音频/视频遥控规格，Audio/Video Remote Control Profile）
用于从控制器（如立体声耳机）向目标设备（如装有 MediaPlayer 的电脑）发送命令（如前跳、暂停和播放）。AVRCP 设计用于提供控制TV、Hi-Fi设备等的标准接口。此规格用于许可单个远程控制设备（或其它设备）控制所有用户可以接入的A/V设备。它可以与 A2DP 或 VDP 配合使用。

AVRCP就是控制音频流和视频流的一个协议，比如：

耳机或车载蓝牙设备控制其他设备上的音乐音源播放，比如手机、平板、电脑等等；
远端设备控制其他设备上的视频播放；
远端设备控制手机拍照；

AVRCP不同版本的协议，控制事情的多少不断增加：

v1.0：基本的远程控制命令，比如播放、暂停、下一首；
v1.3：新增获取音乐当前的播放状态，以及播放音乐的歌曲信息，比如歌曲总时长、歌曲名、歌手等等；
v1.4：新增绝对音量调节等等；
v1.5：相关协议已通过的更改以纠正各种错误；
v1.6：接收项目数量和封面；
对于耳机来说，v1.4就到头儿了，用1.4还是1.6也没啥差别，1.6主要是在车载蓝牙设备上使用，就是咱们爱车上的中控屏幕。

## 协议简介

协议是啥？

你可以把协议看做是：“王八的屁股——规定”。

比如手机是苹果的，耳机是索尼的，凭什么我摸了一下耳机，手机上的音乐播放器就能停止呢？

肯定是一摸耳机，就发射了一个什么信号，手机接收到这个信号，就把停止播放音乐了。

那么这个信号咋定义？是索尼说了算？还是苹果说了算？有那么多厂商，到底谁说了算？

协议说了算。

协议制定了标准，暂停音乐的编码都是这样的，耳机你按照这个发，手机你按照这个接，谁都不能违反这个规定。至于索尼耳机怎么发射这个信号，手机接收到了这个信号怎么处理，那是你们自己的事儿。

多说一句：一般协议是谁制定的？到底谁说了算？

有些协议是一些管理机构定义的，但是绝大数协议是“谁牛谁说了算”。

有一句话叫做：“一流公司做标准（协议），二流公司做技术，三流公司做产品”。

蓝牙AVRCP协议是蓝牙设备之间音视频的控制协议。定义了音频/视频的控制、浏览、查询、通知等一系列的命令集。常用来蓝牙耳机对手机的音乐进行控制，以及获取手机的音乐信息等场景。AVRCP协议有两个角色，分别是controller（CT）和 target(TG)。CT: 发送控制命令到对端，控制对端媒体播放器的设备，例如蓝牙耳机，蓝牙遥控器等。TG：接收对端的控制命令，并执行操作，进行回复的设备，例如手机，电脑等。


## 参考

* [【经典蓝牙】蓝牙AVRCP协议分析](https://developer.aliyun.com/article/1171868)



